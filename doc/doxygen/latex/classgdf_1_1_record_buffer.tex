\hypertarget{classgdf_1_1_record_buffer}{
\section{gdf::RecordBuffer Class Reference}
\label{classgdf_1_1_record_buffer}\index{gdf::RecordBuffer@{gdf::RecordBuffer}}
}


Buffers incomplete records before they are written to disk.  




{\ttfamily \#include $<$RecordBuffer.h$>$}



Collaboration diagram for gdf::RecordBuffer:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=398pt]{classgdf_1_1_record_buffer__coll__graph}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classgdf_1_1_record_buffer_1_1_record_full_handler}{RecordFullHandler}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classgdf_1_1_record_buffer_a81a19745e41216424816d6f5d99d44a3}{
\hyperlink{classgdf_1_1_record_buffer_a81a19745e41216424816d6f5d99d44a3}{RecordBuffer} (const \hyperlink{classgdf_1_1_g_d_f_header_access}{GDFHeaderAccess} $\ast$gdfh)}
\label{classgdf_1_1_record_buffer_a81a19745e41216424816d6f5d99d44a3}

\begin{DoxyCompactList}\small\item\em Constructor. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a4a1ead77698c8ffa21348609f96cac9a}{
virtual \hyperlink{classgdf_1_1_record_buffer_a4a1ead77698c8ffa21348609f96cac9a}{$\sim$RecordBuffer} ()}
\label{classgdf_1_1_record_buffer_a4a1ead77698c8ffa21348609f96cac9a}

\begin{DoxyCompactList}\small\item\em Destructor. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a17d98ebe6d1c41ec7d367e59291697f9}{
void \hyperlink{classgdf_1_1_record_buffer_a17d98ebe6d1c41ec7d367e59291697f9}{reset} ()}
\label{classgdf_1_1_record_buffer_a17d98ebe6d1c41ec7d367e59291697f9}

\begin{DoxyCompactList}\small\item\em Resets the buffer to a valid initial state. \item\end{DoxyCompactList}\item 
void \hyperlink{classgdf_1_1_record_buffer_a7bd44e545daf03030de6e87a7903635a}{handleChannelFull} (const size\_\-t channel\_\-idx)
\begin{DoxyCompactList}\small\item\em Called when a channel becomes full. \item\end{DoxyCompactList}\item 
void \hyperlink{classgdf_1_1_record_buffer_a1ae270e60f9d483a06fe92df0cd664e4}{handleRecordFull} ()
\begin{DoxyCompactList}\small\item\em Called when a record becomes full. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a9de2ad0f9c9020248d52d3ae64137489}{
void \hyperlink{classgdf_1_1_record_buffer_a9de2ad0f9c9020248d52d3ae64137489}{registerRecordFullCallback} (\hyperlink{classgdf_1_1_record_buffer_1_1_record_full_handler}{RecordFullHandler} $\ast$h)}
\label{classgdf_1_1_record_buffer_a9de2ad0f9c9020248d52d3ae64137489}

\begin{DoxyCompactList}\small\item\em Register Callback for record full event. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a818a3b72f625ef7b0dc8bf8a79336bdf}{
void \hyperlink{classgdf_1_1_record_buffer_a818a3b72f625ef7b0dc8bf8a79336bdf}{unregisterRecordFullCallback} (\hyperlink{classgdf_1_1_record_buffer_1_1_record_full_handler}{RecordFullHandler} $\ast$h)}
\label{classgdf_1_1_record_buffer_a818a3b72f625ef7b0dc8bf8a79336bdf}

\begin{DoxyCompactList}\small\item\em Unegister Callback for record full event. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_ac516aef638abed8539809c42b18fcc47}{
void \hyperlink{classgdf_1_1_record_buffer_ac516aef638abed8539809c42b18fcc47}{addSamplePhys} (const size\_\-t channel\_\-idx, const double value)}
\label{classgdf_1_1_record_buffer_ac516aef638abed8539809c42b18fcc47}

\begin{DoxyCompactList}\small\item\em Add a physical sample to the channel specified by channel\_\-idx. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_ac60eef93ea59ab0f159b57d23412ee0f}{
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{classgdf_1_1_record_buffer_ac60eef93ea59ab0f159b57d23412ee0f}{addSampleRaw} (const size\_\-t channel\_\-idx, const T rawval)}
\label{classgdf_1_1_record_buffer_ac60eef93ea59ab0f159b57d23412ee0f}

\begin{DoxyCompactList}\small\item\em Add a raw sample to the channel specified by channel\_\-idx. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_ada2965511d8ec8aa18c19761284a8690}{
void \hyperlink{classgdf_1_1_record_buffer_ada2965511d8ec8aa18c19761284a8690}{blitSamplesPhys} (const size\_\-t channel\_\-idx, const double $\ast$values, size\_\-t num)}
\label{classgdf_1_1_record_buffer_ada2965511d8ec8aa18c19761284a8690}

\begin{DoxyCompactList}\small\item\em Blit a number of physical samples into channel specified by channel\_\-idx. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a554260febe2dc7bc56bb07756eb4f939}{
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{classgdf_1_1_record_buffer_a554260febe2dc7bc56bb07756eb4f939}{blitSamplesRaw} (const size\_\-t channel\_\-idx, const T $\ast$values, size\_\-t num)}
\label{classgdf_1_1_record_buffer_a554260febe2dc7bc56bb07756eb4f939}

\begin{DoxyCompactList}\small\item\em Blit a number of raw samples into channel specified by channel\_\-idx. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a20c9d5f7a970779e191b1a0eb84b4386}{
void \hyperlink{classgdf_1_1_record_buffer_a20c9d5f7a970779e191b1a0eb84b4386}{fillPhys} (const size\_\-t channel\_\-idx, const double value, size\_\-t num)}
\label{classgdf_1_1_record_buffer_a20c9d5f7a970779e191b1a0eb84b4386}

\begin{DoxyCompactList}\small\item\em Fill a number of samples with the same physical value. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a153e1eeac18b088a86bf913671e4879b}{
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{classgdf_1_1_record_buffer_a153e1eeac18b088a86bf913671e4879b}{fillRaw} (const size\_\-t channel\_\-idx, const T value, size\_\-t num)}
\label{classgdf_1_1_record_buffer_a153e1eeac18b088a86bf913671e4879b}

\begin{DoxyCompactList}\small\item\em Fill a number of samples with the same raw value. \item\end{DoxyCompactList}\item 
void \hyperlink{classgdf_1_1_record_buffer_a97e676d68f9aa9441c301c78b46f0a4d}{addRecord} (\hyperlink{classgdf_1_1_record}{Record} \&r)
\begin{DoxyCompactList}\small\item\em Add a complete \hyperlink{classgdf_1_1_record}{Record}. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a21f20828bffa27e1ed7383eacde6a927}{
std::list$<$ boost::shared\_\-ptr$<$ \hyperlink{classgdf_1_1_record}{Record} $>$ $>$::iterator \hyperlink{classgdf_1_1_record_buffer_a21f20828bffa27e1ed7383eacde6a927}{createNewRecord} ()}
\label{classgdf_1_1_record_buffer_a21f20828bffa27e1ed7383eacde6a927}

\begin{DoxyCompactList}\small\item\em Put a new record to the end of the list. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_ab4f141c5c15a7c92be005758ef8231e2}{
\hyperlink{classgdf_1_1_record}{Record} $\ast$ \hyperlink{classgdf_1_1_record_buffer_ab4f141c5c15a7c92be005758ef8231e2}{getFirstFullRecord} ()}
\label{classgdf_1_1_record_buffer_ab4f141c5c15a7c92be005758ef8231e2}

\begin{DoxyCompactList}\small\item\em Reference to first (oldest) full record in list. This is also the first record that gets filled. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_aea0c7b33b23e3f4d97cc2398d27e740b}{
void \hyperlink{classgdf_1_1_record_buffer_aea0c7b33b23e3f4d97cc2398d27e740b}{removeFirstFullRecord} ()}
\label{classgdf_1_1_record_buffer_aea0c7b33b23e3f4d97cc2398d27e740b}

\begin{DoxyCompactList}\small\item\em Remove first full record in list. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a3573e58d036d703a5862d859e9f7395c}{
size\_\-t \hyperlink{classgdf_1_1_record_buffer_a3573e58d036d703a5862d859e9f7395c}{getNumFullRecords} ()}
\label{classgdf_1_1_record_buffer_a3573e58d036d703a5862d859e9f7395c}

\begin{DoxyCompactList}\small\item\em Get number of full records in the buffer. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a26a79cdf41e61e9bf900b5c044e41777}{
size\_\-t \hyperlink{classgdf_1_1_record_buffer_a26a79cdf41e61e9bf900b5c044e41777}{getNumPartialRecords} ()}
\label{classgdf_1_1_record_buffer_a26a79cdf41e61e9bf900b5c044e41777}

\begin{DoxyCompactList}\small\item\em Get number of partially filled records currently in the list. \item\end{DoxyCompactList}\item 
\hyperlink{classgdf_1_1_channel}{Channel} $\ast$ \hyperlink{classgdf_1_1_record_buffer_a780d3156d97dd0e2f7121e813419035a}{getValidChannel} (const size\_\-t channel\_\-idx)
\begin{DoxyCompactList}\small\item\em Returns reference to channel specified by channel\_\-idx. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_a924508d9e9988f4a97545b3070a2d156}{
size\_\-t \hyperlink{classgdf_1_1_record_buffer_a924508d9e9988f4a97545b3070a2d156}{getNumFreeAlloc} (const size\_\-t channel\_\-idx)}
\label{classgdf_1_1_record_buffer_a924508d9e9988f4a97545b3070a2d156}

\begin{DoxyCompactList}\small\item\em Gets number of free samples currently allocated for this channel. \item\end{DoxyCompactList}\item 
\hypertarget{classgdf_1_1_record_buffer_ad58cb7b3c52b576d35abab83db4b5cad}{
void \hyperlink{classgdf_1_1_record_buffer_ad58cb7b3c52b576d35abab83db4b5cad}{flood} ()}
\label{classgdf_1_1_record_buffer_ad58cb7b3c52b576d35abab83db4b5cad}

\begin{DoxyCompactList}\small\item\em Fills all partial records with default values. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Buffers incomplete records before they are written to disk. When saving data, one or more channels can be ahead of the others, and may even extend over multiple records. \hyperlink{classgdf_1_1_record_buffer}{RecordBuffer} takes care of this by creating a new record as soon a channel exceeds it's capacity. 

\subsection{Member Function Documentation}
\hypertarget{classgdf_1_1_record_buffer_a97e676d68f9aa9441c301c78b46f0a4d}{
\index{gdf::RecordBuffer@{gdf::RecordBuffer}!addRecord@{addRecord}}
\index{addRecord@{addRecord}!gdf::RecordBuffer@{gdf::RecordBuffer}}
\subsubsection[{addRecord}]{\setlength{\rightskip}{0pt plus 5cm}void gdf::RecordBuffer::addRecord (
\begin{DoxyParamCaption}
\item[{{\bf Record} \&}]{ r}
\end{DoxyParamCaption}
)}}
\label{classgdf_1_1_record_buffer_a97e676d68f9aa9441c301c78b46f0a4d}


Add a complete \hyperlink{classgdf_1_1_record}{Record}. 

There may not be any partial records in the buffer in order to add a complete record. 

Here is the call graph for this function:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{classgdf_1_1_record_buffer_a97e676d68f9aa9441c301c78b46f0a4d_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=394pt]{classgdf_1_1_record_buffer_a97e676d68f9aa9441c301c78b46f0a4d_icgraph}
\end{center}
\end{figure}


\hypertarget{classgdf_1_1_record_buffer_a780d3156d97dd0e2f7121e813419035a}{
\index{gdf::RecordBuffer@{gdf::RecordBuffer}!getValidChannel@{getValidChannel}}
\index{getValidChannel@{getValidChannel}!gdf::RecordBuffer@{gdf::RecordBuffer}}
\subsubsection[{getValidChannel}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Channel} $\ast$ gdf::RecordBuffer::getValidChannel (
\begin{DoxyParamCaption}
\item[{const size\_\-t}]{ channel\_\-idx}
\end{DoxyParamCaption}
)}}
\label{classgdf_1_1_record_buffer_a780d3156d97dd0e2f7121e813419035a}


Returns reference to channel specified by channel\_\-idx. 

If channel does not exist gdf::nonexistent\_\-channel\_\-access::nonexistent\_\-channel\_\-access is thrown. A new record is created if the channelhead points to the end of the record list. 

Here is the call graph for this function:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{classgdf_1_1_record_buffer_a780d3156d97dd0e2f7121e813419035a_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{classgdf_1_1_record_buffer_a780d3156d97dd0e2f7121e813419035a_icgraph}
\end{center}
\end{figure}


\hypertarget{classgdf_1_1_record_buffer_a7bd44e545daf03030de6e87a7903635a}{
\index{gdf::RecordBuffer@{gdf::RecordBuffer}!handleChannelFull@{handleChannelFull}}
\index{handleChannelFull@{handleChannelFull}!gdf::RecordBuffer@{gdf::RecordBuffer}}
\subsubsection[{handleChannelFull}]{\setlength{\rightskip}{0pt plus 5cm}void gdf::RecordBuffer::handleChannelFull (
\begin{DoxyParamCaption}
\item[{const size\_\-t}]{ channel\_\-idx}
\end{DoxyParamCaption}
)}}
\label{classgdf_1_1_record_buffer_a7bd44e545daf03030de6e87a7903635a}


Called when a channel becomes full. 

This function advances the write pointer m\_\-channelhead for this channel to the next record. If there is no next record, a new one is created. Also checks if the current record is full and performs calls the respective handler. 

Here is the call graph for this function:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{classgdf_1_1_record_buffer_a7bd44e545daf03030de6e87a7903635a_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{classgdf_1_1_record_buffer_a7bd44e545daf03030de6e87a7903635a_icgraph}
\end{center}
\end{figure}


\hypertarget{classgdf_1_1_record_buffer_a1ae270e60f9d483a06fe92df0cd664e4}{
\index{gdf::RecordBuffer@{gdf::RecordBuffer}!handleRecordFull@{handleRecordFull}}
\index{handleRecordFull@{handleRecordFull}!gdf::RecordBuffer@{gdf::RecordBuffer}}
\subsubsection[{handleRecordFull}]{\setlength{\rightskip}{0pt plus 5cm}void gdf::RecordBuffer::handleRecordFull (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classgdf_1_1_record_buffer_a1ae270e60f9d483a06fe92df0cd664e4}


Called when a record becomes full. 



Here is the caller graph for this function:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{classgdf_1_1_record_buffer_a1ae270e60f9d483a06fe92df0cd664e4_icgraph}
\end{center}
\end{figure}




The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
include/GDF/RecordBuffer.h\item 
src/RecordBuffer.cpp\end{DoxyCompactItemize}
